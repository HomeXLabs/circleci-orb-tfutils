description: >
  Installs terraform using tfenv, and adds the path to PATH.
  Can optionally specify the version to be installed, by default it installs the latest version.

parameters:
  terraform-version:
    type: string
    description: Install a specific version of Terraform.
    default: latest

steps:
  - install-tfenv
  - run:
      name: Install Terraform
      command: |
        if [ "<<parameters.terraform-version >>" == "latest" ]; then
          TERRAFORM_VERSION=""
        else
          TERRAFORM_VERSION=<<parameters.terraform-version>>
        fi

        tfenv install ${TERRAFORM_VERSION}
        tfenv use ${TERRAFORM_VERSION}
